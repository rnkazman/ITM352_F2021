<script src="./product_data.js"></script>

<script>
    let params = (new URL(document.location)).searchParams;
    var q = params.get('quantity');

    let model = products[0]['model'];
    let model_price = products[0]['price'];

    if (typeof q != 'undefined') {
        if (isNonNegInt(q)) {
            
            document.write(`<h2>Thank you for purchasing ${q} ${model}. Your total is \$${q * model_price}!</h2>`);
        } else {
            document.write(`Error: ${q} is not a quantity! Hit the back button to fix.`);
        }
    }

    function isNonNegInt(q, returnErrors = false) {
    errors = []; // assume no errors at first
    if (Number(q) != q) errors.push('Not a number!'); // Check if string is a number value
    else {
        if (q < 0) errors.push('Negative value!'); // Check if it is non-negative
        if (parseInt(q) != q) errors.push('Not an integer!'); // Check that it is an integer
    }
    return returnErrors ? errors : (errors.length == 0);
}
</script>